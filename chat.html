<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Blush & Blow Chatbot</title>
<style>
  body {
    font-family: 'Poppins', sans-serif;
    background: black;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    margin: 0;
  }

  .chat-container {
    width: 95%;
    max-width: 400px;
    height: 80vh; /* flexible height */
    min-height: 400px; /* ensure usability */ 
    background-color: black;
    border-radius: 15px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    display: flex;
    flex-direction: column;
    overflow: hidden;
  }

  .chat-header {
    background-color: #e3b174;
    color: black;
    text-align: center;
    padding: 10px;
    font-size: 1.2em;
    font-weight: bold;
  }

  .chat-body {
    flex: 1;
    padding: 15px;
    background-color: black;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    position: relative;
    color: #e3b174;
  }

  .chat-body::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 70%;
    width: 300px;
    height: 300px;
    max-width: 60%;
    transform: translate(-50%, -50%);
    background-image: url('logo.png');
    background-size: contain;
    background-repeat: no-repeat;
    opacity: 0.2;
    pointer-events: none;
    z-index: 0;
  }

  .message {
    margin: 8px 0;
    padding: 10px;
    border-radius: 10px;
    max-width: 75%;
    word-wrap: break-word;
    font-size: 14px;
    z-index: 1;
  }

  .user-message {
    background-color: rgba(227,177,116,0.9);
    align-self: flex-end;
    color: black;
  }

  .bot-message {
    background-color: rgba(227,177,116,0.3);
    align-self: flex-start;
    color: #e3b174;
  }

  .chat-footer {
    display: flex;
    border-top: 1px solid #ddd;
    background-color: #000;
    position: sticky;
    bottom: 0;
  }

select,
input[type="date"],
input[type="time"] {
  background-color: rgba(227, 177, 116, 0.15);
  color: #e3b174;
  font-family: 'Poppins', sans-serif;
  padding: 6px 10px; /* smaller height */
  font-size: 13px;
  border: 1px solid #e3b174;
  border-radius: 10px;
  margin-top: 6px;
  margin-bottom: 8px;
  width: 80%;  /* reduced width */
  box-sizing: border-box;
  backdrop-filter: blur(4px);
  box-shadow: 0 2px 8px rgba(227, 177, 116, 0.3);
  transition: all 0.3s ease;
}

select:focus,
input[type="date"]:focus,
input[type="time"]:focus {
  outline: none;
  border-color: #fff2d9;
  box-shadow: 0 0 6px 1px rgba(227, 177, 116, 0.6);
  background-color: rgba(227, 177, 116, 0.25);
  color: #ffffff;
}
  
input, select {
    flex: 1;
    border: none;
    padding: 12px;
    font-size: 14px;
    border-radius: 0 0 0 15px;
    outline: none;
    color: black;
  }

  button {
    background-color: #e3b174;
    color: black;
    border: none;
    padding: 0 20px;
    font-size: 14px;
    cursor: pointer;
    border-radius: 0 0 15px 0;
    transition: background-color 0.2s;
  }

  button:hover {
    background-color: #d1a960;
  }

  .menu-number {
    display: inline-block;
    width: 20px;
    height: 20px;
    line-height: 20px;
    text-align: center;
    background-color: #e3b174;
    color: black;
    font-weight: bold;
    border-radius: 50%;
    cursor: pointer;
    margin-right: 6px;
    font-size: 11px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    transition: background-color 0.2s, transform 0.1s;
    position: relative;
    overflow: hidden;
  }

  .menu-number:hover {
    background-color: #d1a960;
    transform: scale(1.2);
  }

  .menu-item {
    margin: 6px 0;
    font-size: 14px;
    display: flex;
    align-items: center;
    z-index: 1;
  }

  .pulse {
    animation: pulse 1.2s ease-in-out infinite;
  }

  @keyframes pulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.15); }
    100% { transform: scale(1); }
  }

  .back-button {
    display: inline-block;
    background-color: #e3b174;
    color: black;
    padding: 5px 12px;
    border-radius: 20px 0 0 20px;
    cursor: pointer;
    font-size: 12px;
    margin-bottom: 10px;
  }

  .back-button:hover {
    background-color: #d1a960;
  }
/* === Improved Message Spacing === */
#chatBody p,
.message {
  line-height: 1.9;          /* More vertical space between lines */
  margin-bottom: 14px;       /* Space between each chat bubble */
  padding: 10px 12px;        /* Adds more clickable area */
  border-radius: 10px;
  font-size: 16px;           /* Slightly larger text for readability */
}

/* === Improve spacing for menu items === */
.menu-item {
  margin: 10px 0;
  line-height: 1.8;
}

/* === Improve tap area for buttons === */
button {
  padding: 10px 22px;
  font-size: 15px;
}


</style>
</head>
<body>
<div class="chat-container">
  <div class="chat-header">💅 Blush & Blow Chatbot</div>
  <div class="chat-body" id="chatBody"></div>
  <div class="chat-footer">
    <input type="text" id="numberInput" placeholder="Type number here...">
    <button onclick="handleEnter()">Send</button>
  </div>
</div>

<script>
const chatBody = document.getElementById('chatBody');
const numberInput = document.getElementById('numberInput');

function scrollToBottom(){
    chatBody.scrollTop = chatBody.scrollHeight;
}


const languages = ["English", "اردو", "پښتو", "بلوچی"];
let selectedLanguage = "English";
let currentScreen = "language"; // language, mainMenu, serviceMenu, subService, appointment
let currentService = "";  

// Data
const mainMenuData = {
  "English": [
    "Services",
    "Locations",
    "Timings",
    "Policies",
    "Current Deals",
    "Social Media",
    "Assistant",
    "Exit"
  ],
  "اردو": ["خدمات","مقامات","وقت","پالیسیاں","موجودہ ڈیلز","سوشل میڈیا","اسسٹنٹ","خروج"],
  "پښتو": ["خدمات","ځایونه","وختونه","پالیسۍ","اوسني وړاندیزونه","ټولنیز رسنۍ","مرستیال","وتل"],
  "بلوچی": ["خدمات","مقامات","اوقات","پالیسیاں","موجودہ ڈیلز","سوشل میڈیا","اسسٹنٹ","خروج"]
};


const servicesData = {
  "English": {
    "Hair Work":["Hair Protein ₨2000","Keratin Treatment ₨2500","Low Lights ₨1500","Hi-Lights ₨1500","Hair Color ₨2000","Hair Cut ₨800","Balayage ₨2500"],
    "Nails":["Manicure ₨1000","Pedicure ₨1200","Nail Art ₨800","Nail Polish ₨500","Nail Extensions ₨1500"],
    "Facials":["Basic Facial ₨1500","Deep Cleansing ₨2000","Anti-Aging ₨2500","Hydrating ₨2000","Acne Treatment ₨1800","Brightening ₨2200","Gold Facial ₨3500"],
    "Eyes":["Eyelash Extensions ₨2000","Eyebrow Threading ₨500","Eyeliner ₨600","Eye Tint ₨400","Lash Lift ₨1800","Brow Lamination ₨1500","Brow Tint ₨500"],
    "Mehandi":["Basic Mehandi ₨1000","Bridal Mehandi ₨5000","Party Mehandi ₨2000","Glitter Mehandi ₨1500","Arabic Mehandi ₨1800"],
    "Bridal":["Bridal Makeup ₨8000","Trial Makeup ₨2000","Bridal Hair Styling ₨4000","Henna Design ₨1500","Bridal Package ₨15000","Bridal Skincare ₨3000","Bridal Consultation ₨1000"],
    "Party Makeup":["Party Makeup ₨3500","Evening Makeup ₨2500","Glam Makeup ₨4000","Event Makeup ₨3000","Makeup Tutorial ₨1500","Makeup Touchup ₨1000","Photo Shoot Makeup ₨4500"]
  },
  "اردو": {
    "بالوں کے کام":["ہیر پروٹین ₨2000","کریٹن ٹریٹمنٹ ₨2500","لو لائٹس ₨1500","ہائی لائٹس ₨1500","ہیر کلر ₨2000","ہیر کٹ ₨800","بیلیج ₨2500"],
    "ناخن":["منی کیور ₨1000","پیڈی کیور ₨1200","نیل آرٹ ₨800","نیل پالش ₨500","نیل ایکسٹینشن ₨1500"],
    "چہرہ":["بیسک فیشل ₨1500","ڈیپ کلینسنگ ₨2000","اینٹی ایجنگ ₨2500","ہائیڈریٹنگ ₨2000","اکنی ٹریٹمنٹ ₨1800","برائٹننگ ₨2200","گولڈ فیشل ₨3500"],
    "آنکھیں":["آئیلش ایکسٹینشن ₨2000","آئی برو تھریڈنگ ₨500","آئی لائنر ₨600","آئی ٹنٹ ₨400","لاش لفٹ ₨1800","برو لیمینیشن ₨1500","برو ٹنٹ ₨500"],
    "مہندی":["بیسک مہندی ₨1000","برائیڈل مہندی ₨5000","پارٹی مہندی ₨2000","گلٹر مہندی ₨1500","عربی مہندی ₨1800"],
    "برائیڈل":["برائیڈل میک اپ ₨8000","ٹرائل میک اپ ₨2000","برائیڈل ہیر اسٹائل ₨4000","ہننا ڈیزائن ₨1500","برائیڈل پیکج ₨15000","برائیڈل سکن کیئر ₨3000","برائیڈل کنسلٹیشن ₨1000"],
    "پارٹی میک اپ":["پارٹی میک اپ ₨3500","ایوننگ میک اپ ₨2500","گلیم میک اپ ₨4000","ایونٹ میک اپ ₨3000","میک اپ ٹیوٹوریل ₨1500","میک اپ ٹچ اپ ₨1000","فوٹو شوٹ میک اپ ₨4500"]
  },
"پښتو": {
    "د ویښتو کار":["د ویښتو پروټین ₨2000","کریټین درملنه ₨2500","ټیټ څراغونه ₨1500","لوړ څراغونه ₨1500","د ویښتو رنګ ₨2000","ویښتو پرې کول ₨800","بالیاژ ₨2500"],
    "نوکان":["منی کیور ₨1000","پیډیکور ₨1200","نوک آرټ ₨800","نوک پولش ₨500","نوک ایکسټینشن ₨1500"],
    "فیشلونه":["بنسټیز فیشل ₨1500","ژور پاکوالی ₨2000","ضد عمر ₨2500","هایډریټینګ ₨2000","داغ درملنه ₨1800","روښانتیا ₨2200","طلایي فیشل ₨3500"],
    "سترګې":["د مژه اوږدول ₨2000","د ابرو تار کول ₨500","د سترګو لاینر ₨600","د سترګو ټینټ ₨400","لاش لیفټ ₨1800","د ابرو لامینیشن ₨1500","د ابرو ټینټ ₨500"],
    "مهندي":["بنسټیز مهندي ₨1000","د ودونو مهندي ₨5000","پارټي مهندي ₨2000","ګلیټر مهندي ₨1500","عربي مهندي ₨1800"],
    "واده":["د واده میک اپ ₨8000","ازمایښتي میک اپ ₨2000","د واده ویښتان سټایل ₨4000","حنه ډیزاین ₨1500","د واده پیکج ₨15000","د واده پوستکي پاملرنه ₨3000","د واده مشوره ₨1000"],
    "پارټي میک اپ":["پارټي میک اپ ₨3500","د ماښام میک اپ ₨2500","ګلیم میک اپ ₨4000","د پیښې میک اپ ₨3000","میک اپ ښوونه ₨1500","میک اپ ټچ اپ ₨1000","عکس اخیستنې میک اپ ₨4500"]
  },
  "بلوچی": {
    "کال سر کار":["کال سر پروټین ₨2000","کریټین علاج ₨2500","کم رڼا ₨1500","زیادہ رڼا ₨1500","کال رنگ ₨2000","کال کٹ ₨800","بالایج ₨2500"],
    "ناخن":["منی کیور ₨1000","پیڈی کیور ₨1200","ناخن آرٹ ₨800","ناخن پالش ₨500","ناخن توسیع ₨1500"],
    "چہرہ":["بنیادی چہرہ صاف کرنا ₨1500","گہرا صفائی ₨2000","اینٹی ایجنگ ₨2500","نمی بخش ₨2000","دھبہ علاج ₨1800","روشن کرنا ₨2200","گولڈ فیشل ₨3500"],
    "آنکھیں":["مژہ توسیع ₨2000","بھنویں تھریڈنگ ₨500","آئ لائنر ₨600","آئی ٹنٹ ₨400","لاش لفٹ ₨1800","بھنویں لیمینیشن ₨1500","بھنویں ٹنٹ ₨500"],
    "مہندی":["بنیادی مہندی ₨1000","دلہن مہندی ₨5000","پارٹی مہندی ₨2000","چمکدار مہندی ₨1500","عربی مہندی ₨1800"],
    "دلہن":["دلہن میک اپ ₨8000","آزمائشی میک اپ ₨2000","دلہن کے بالوں کی سجاوٹ ₨4000","حناء ڈیزائن ₨1500","دلہن پیکج ₨15000","دلہن کی جلد کی دیکھ بھال ₨3000","دلہن مشورہ ₨1000"],
    "پارٹی میک اپ":["پارٹی میک اپ ₨3500","شام کا میک اپ ₨2500","گلیمر میک اپ ₨4000","ایونٹ میک اپ ₨3000","میک اپ سبق ₨1500","میک اپ ٹچ اپ ₨1000","فوٹو شوٹ میک اپ ₨4500"]
  }
  // Similarly add Pashto and Balochi if needed
};

const locationsData = {
  "English":["360-C Chiltan Housing Scheme Quetta","260-C Samungli Housing Scheme Quetta"],
  "اردو":["360-C چلتن ہاؤسنگ اسکیم کوئٹہ","260-C سمنگلی ہاؤسنگ اسکیم کوئٹہ"],
  "پښتو":["360-C چلتن هاوسنګ سکیم کوټه","260-C سمنګلي هاوسنګ سکیم کوټه"],
  "بلوچی":["360-C چلتن ہاؤسنگ اسکیم کوئٹہ","260-C سمنگلی ہاؤسنگ اسکیم کوئٹہ"]
};

const timingsData = {
  "English":["11 AM - 9 PM, 7 days a week"],
  "اردو":["صبح 11 بجے تا رات 9 بجے، 7 دن"],
  "پښتو":["له سهار 11 بجو تر ماښام 9 بجو، په اونۍ کې 7 ورځې"],
  "بلوچی":["صبح 11 بجے سے رات 9 بجے تک، ہفتے کے 7 دن"]
};

const policiesData = {
  "English":[
    "No children and men allowed",
    "Only one attendant allowed, any loss charged",
    "Advance payment is non-refundable",
    "Take care of appointment timings"
  ],
  "اردو":[
    "بچوں اور مردوں کی اجازت نہیں",
    "صرف ایک ساتھ آنے والا، کسی نقصان کی قیمت وصول کی جائے گی",
    "ایڈوانس ادائیگی ناقابل واپسی ہے",
    "اپائنٹمنٹ کے وقت کا خیال رکھیں"
  ],
  "پښتو":[
    "ماشومان او نارینه منع دي",
    "یوازې یو کس د ملګري په توګه اجازه لري، هر زیان به چارج شي",
    "مخکې ورکړل شوې پیسې نه بیرته ورکول کیږي",
    "د ملاقات وختونو خیال ساتئ"
  ],
  "بلوچی":[
    "بچوں اور مردوں کی اجازت نہیں",
    "صرف ایک ساتھ آنے والا، کسی نقصان کی قیمت وصول کی جائے گی",
    "ایڈوانس ادائیگی ناقابل واپسی ہے",
    "اپائنٹمنٹ کے وقت کا خیال رکھیں"
  ]
};

let appointmentData = {branch:'', date:'', time:'', service:'', parentService:''};  // ✅ add parentService


// ---------------- Language Screen ----------------
function showLanguageScreen() {
  chatBody.innerHTML = "";
  currentScreen="language";
  languages.forEach((lang,index)=>{
    const div=document.createElement('div');
    div.classList.add('menu-item');
    const span=document.createElement('span');
    span.classList.add('menu-number','pulse');
    span.textContent=index+1;
    span.onclick=()=> selectLanguage(lang);
    div.appendChild(span);
    div.appendChild(document.createTextNode(" "+lang));
    chatBody.appendChild(div);
  });
}

// ---------------- Main Menu ----------------
function showMainMenu() {
  chatBody.innerHTML = "";
  currentScreen="mainMenu";
  mainMenuData[selectedLanguage].forEach((item,index)=>{
    const div=document.createElement('div');
    div.classList.add('menu-item');
    const span=document.createElement('span');
    span.classList.add('menu-number','pulse');
    span.textContent=index+1;
    span.onclick=()=> handleMainMenu(index+1);
    div.appendChild(span);
    div.appendChild(document.createTextNode(" "+item));
    chatBody.appendChild(div);
  });
}

// ---------------- Main Menu Handler ----------------
function handleMainMenu(number){
  switch(number){
    case 1: showServicesScreen(); break;
    case 2: showLocationsScreen(); break;
    case 3: showTimingsScreen(); break;
    case 4: showPoliciesScreen(); break;
    case 5: showDealsScreen(); break;
    case 6: showSocialMediaScreen(); break;  // ✅ new
    case 7:
      if(selectedLanguage === "English") showAssistantScreen();
      else alert("Assistant is available only in English.");
      break;
    case 8: showLanguageScreen(); break; // ✅ exit
  }
}


function showAssistantScreen(){
  chatBody.innerHTML = "";       // Clear previous messages
  currentScreen = "assistant";   // Update current screen
  numberInput.placeholder = "Ask me anything..."; // Show a prompt
  numberInput.type = "text";     // Make sure it's text input

  // Back button
  const backBtn = document.createElement('div');
  backBtn.classList.add('back-button');
  backBtn.textContent = "← Back";
  backBtn.onclick = showMainMenu;
  chatBody.appendChild(backBtn);

  // Assistant welcome message
  const info = document.createElement('div');
  info.classList.add('bot-message', 'message');
  info.textContent = "Hello! I am your English Assistant. Ask me anything.";
  chatBody.appendChild(info);

  scrollToBottom();
}

function addUserMessage(msg){
  const div = document.createElement('div');
  div.classList.add('user-message','message'); // use your CSS classes
  div.textContent = msg;
  chatBody.appendChild(div);
  scrollToBottom(); // optional, scroll to latest message
}

async function sendToGPT(message){
  addBotMessage("Processing...");

  try {
    const res = await fetch("http://localhost:3000/api/chat", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ message })
    });
    const data = await res.json();
    addBotMessage(data.reply);
  } catch(err) {
    addBotMessage("Error connecting to GPT API.");
    console.error(err);
  }
}

function addBotMessage(msg){
  const div = document.createElement('div');
  div.classList.add('bot-message', 'message');
  div.textContent = msg;
  chatBody.appendChild(div);
  scrollToBottom();
}



// ---------------- Screens ----------------
function showServicesScreen(){
  chatBody.innerHTML="";
  currentScreen="services";
  // Back Button
  const backBtn = document.createElement('div');
  backBtn.classList.add('back-button');
  backBtn.textContent="← Back";
  backBtn.onclick=showMainMenu;
  chatBody.appendChild(backBtn);

  const services = Object.keys(servicesData[selectedLanguage]);
  services.forEach((service,index)=>{
    const div=document.createElement('div');
    div.classList.add('menu-item');
    const span=document.createElement('span');
    span.classList.add('menu-number','pulse');
    span.textContent=index+1;
    span.onclick=()=> showSubServiceScreen(service);
    div.appendChild(span);
    div.appendChild(document.createTextNode(" "+service));
    chatBody.appendChild(div);
  });
}

// Sub Services Screen
function showSubServiceScreen(service){
  chatBody.innerHTML="";
  currentScreen="subService";
  appointmentData.service=service;
  currentService = service;   // ✅ Save which service was clicked

  const backBtn = document.createElement('div');
  backBtn.classList.add('back-button');
  backBtn.textContent="← Back";
  backBtn.onclick=showServicesScreen;
  chatBody.appendChild(backBtn);

  const subServices = servicesData[selectedLanguage][service];
  subServices.forEach((sub,index)=>{
    const div=document.createElement('div');
    div.classList.add('menu-item');
    const span=document.createElement('span');
    span.classList.add('menu-number','pulse');
    span.textContent=index+1;
span.onclick = () => {
  appointmentData.parentService = service;   // parent service save
  appointmentData.service = sub;             // sub service save
  showAppointmentScreen(sub);
};
    div.appendChild(span);
    div.appendChild(document.createTextNode(" "+sub));
    chatBody.appendChild(div);
  });
}

// Appointment Screen
function showAppointmentScreen(subService){
  chatBody.innerHTML="";
  currentScreen="appointment";
  appointmentData.service=subService;

  const backBtn = document.createElement('div');
  backBtn.classList.add('back-button');
  backBtn.textContent="← Back";
  backBtn.onclick = () => showSubServiceScreen(appointmentData.parentService);
  chatBody.appendChild(backBtn);

  // Branch Selection

  const branchDiv=document.createElement('div');
  branchDiv.classList.add('menu-item');
  const branchLabel=document.createElement('div');
  branchLabel.textContent="Select Branch:";
  branchDiv.appendChild(branchLabel);
  const branchSelect=document.createElement('select');
  const branches = locationsData[selectedLanguage];
  branches.forEach((b)=>{ const opt=document.createElement('option'); opt.value=b; opt.textContent=b; branchSelect.appendChild(opt); });
  branchDiv.appendChild(branchSelect);
  chatBody.appendChild(branchDiv);

  // Date input
  const dateDiv=document.createElement('div');
  dateDiv.classList.add('menu-item');
  const dateLabel=document.createElement('div');
  dateLabel.textContent="Select Date:";
  dateDiv.appendChild(dateLabel);
  const dateInput=document.createElement('input');
  dateInput.type="date";
  dateDiv.appendChild(dateInput);
  chatBody.appendChild(dateDiv);

  // Time input
  const timeDiv=document.createElement('div');
  timeDiv.classList.add('menu-item');
  const timeLabel=document.createElement('div');
  timeLabel.textContent="Select Time:";
  timeDiv.appendChild(timeLabel);
  const timeInput=document.createElement('input');
  timeInput.type="time";
  timeDiv.appendChild(timeInput);
  chatBody.appendChild(timeDiv);

  // Book Button
  const bookBtn=document.createElement('button');
  bookBtn.textContent="Book Appointment";
  bookBtn.onclick=()=>{
    if(!branchSelect.value || !dateInput.value || !timeInput.value){
      alert("Please select branch, date, and time.");
      return;
    }
    appointmentData.branch=branchSelect.value;
    appointmentData.date=dateInput.value;
    appointmentData.time=timeInput.value;

    chatBody.innerHTML="";
    const msg=document.createElement('div');
    msg.classList.add('bot-message','message');
    msg.innerHTML=`Appointment for <b>${appointmentData.service}</b> booked!<br>
    Branch: ${appointmentData.branch}<br>Date: ${appointmentData.date}<br>Time: ${appointmentData.time}<br>
    Please pay 50% in advance at: <b> Bank: Bank Al-Habib, A/C: 11640981001260016, IBAN: PK31BAHL1164098100126001</b> (Non-Refundable) </b> Easy Paisa: 03338877858`;
    chatBody.appendChild(msg);
 // Add Home Button
    const homeBtn = document.createElement('div');
    homeBtn.classList.add('back-button');
    homeBtn.textContent = "🏠 Home";
    homeBtn.onclick = showLanguageScreen;
    chatBody.appendChild(homeBtn);


  }
  chatBody.appendChild(bookBtn);
}


// Deals Screen
function showDealsScreen() {
  chatBody.innerHTML = "";
  currentScreen = "deals";

  // Back button to go home
  const backBtn = document.createElement("div");
  backBtn.classList.add("back-button");
  backBtn.textContent = selectedLanguage === "English" ? "← Back" :
                        selectedLanguage === "اردو" ? "← واپس جائیں" :
                        selectedLanguage === "پښتو" ? "← شاته لاړ شئ" :
                        "← واپس";
  backBtn.onclick = showMainMenu;
  chatBody.appendChild(backBtn);

  // Heading
  const heading = document.createElement("div");
  heading.classList.add("chat-heading");
  heading.textContent =
    selectedLanguage === "English" ? "✨ Our Exclusive Deals ✨" :
    selectedLanguage === "اردو" ? "✨ ہماری خصوصی ڈیلز ✨" :
    selectedLanguage === "پښتو" ? "✨ زموږ ځانګړې معاملې ✨" :
    "✨ ہماری خاص ڈیلز ✨";
  chatBody.appendChild(heading);

  // Deals per language
  const deals = {
    "English": [
      "🌟 Golden Glam Deal – 20% OFF Bridal Makeup (valid till Oct 15)",
      "💅 Nail & Glow Combo – Free Nail Art with Pedicure",
      "✨ Party Sparkle Package – Makeup + Hair Styling only ₨5000"
    ],
    "اردو": [
      "🌟 گولڈن گلیم ڈیل – برائیڈل میک اپ پر 20٪ رعایت (15 اکتوبر تک)",
      "💅 نیل اینڈ گلو کومبو – پیڈی کیور کے ساتھ فری نیل آرٹ",
      "✨ پارٹی اسپارکل پیکج – میک اپ + ہیر اسٹائل صرف ₨5000"
    ],
    "پښتو": [
      "🌟 د سرو زرو ډیل – د واده میک اپ 20٪ تخفیف (تر اکتوبر 15 پورې)",
      "💅 د نوکانو کومبو – د پیډیکور سره وړیا نوک آرټ",
      "✨ د پارټي پیکج – میک اپ + ویښتو سټایل یوازې ₨5000"
    ],
    "بلوچی": [
      "🌟 گولڈن گلیم ڈیل – دلہن میک اپ پر 20٪ ڈسکاؤنٹ (15 اکتوبر تک)",
      "💅 نیل اینڈ گلو کومبو – پیڈی کیور کے ساتھ فری ناخن آرٹ",
      "✨ پارٹی اسپارکل پیکج – میک اپ + بالوں کی سجاوٹ صرف ₨5000"
    ]
  };

  // Create deal buttons
  deals[selectedLanguage].forEach((dealText) => {
    const div = document.createElement("div");
    div.classList.add("menu-item");
    div.style.cursor = "pointer";
    div.textContent = dealText;

    div.onclick = () => {
      // Popup confirmation
      const confirmMsg =
        selectedLanguage === "English"
          ? "Do you want to avail this deal?"
          : selectedLanguage === "اردو"
          ? "کیا آپ یہ ڈیل حاصل کرنا چاہتے ہیں؟"
          : selectedLanguage === "پښتو"
          ? "ایا تاسو دا معامله اخیستل غواړئ؟"
          : "کیا آپ یہ ڈیل لینا چاہتے ہیں؟";

      if (confirm(confirmMsg)) {
        appointmentData.parentService = "Deals";
        appointmentData.service = dealText;
        showAppointmentScreen(dealText);
      }
    };

    chatBody.appendChild(div);
  });
}


// Locations Screen
function showLocationsScreen(){
  chatBody.innerHTML="";
  currentScreen="locations";

  const backBtn = document.createElement('div');
  backBtn.classList.add('back-button');
  backBtn.textContent="← Back";
  backBtn.onclick=showMainMenu;
  chatBody.appendChild(backBtn);

  const locations=locationsData[selectedLanguage];
  const mapLinks = {
  "English": [
    "https://www.google.com/maps?q=7X5C+9FM,+Chiltan+Housing+Society+Chiltan+Housing+Scheme,+Quetta,+Pakistan", // Chiltan
    "https://maps.app.goo.gl/w1kS3czQDYPGdANi9" // Samungli
  ],
  "اردو": [
    "https://www.google.com/maps?q=7X5C+9FM,+Chiltan+Housing+Society+Chiltan+Housing+Scheme,+Quetta,+Pakistan",
    "https://maps.app.goo.gl/w1kS3czQDYPGdANi9"
  ],
  "پښتو": [
    "https://www.google.com/maps?q=7X5C+9FM,+Chiltan+Housing+Society+Chiltan+Housing+Scheme,+Quetta,+Pakistan",
    "https://maps.app.goo.gl/w1kS3czQDYPGdANi9"
  ],
  "بلوچی": [
    "https://www.google.com/maps?q=7X5C+9FM,+Chiltan+Housing+Society+Chiltan+Housing+Scheme,+Quetta,+Pakistan",
    "https://maps.app.goo.gl/w1kS3czQDYPGdANi9"
  ]
};



  const openText = {
    "English": "Open in Google Maps",
    "اردو": "گوگل میپس میں کھولیں",
    "پښتو": "په ګوګل میپس کې پرانیزئ",
    "بلوچی": "گوگل میپسءَ کھولیں"
  };

  locations.forEach((loc,index)=>{
    const div=document.createElement('div');
    div.classList.add('menu-item');

    const span=document.createElement('span');
    span.classList.add('menu-number','pulse');
    span.textContent=index+1;
    div.appendChild(span);

    const locText = document.createTextNode(" " + loc);
    div.appendChild(locText);

    // Map link
    const mapLink = document.createElement('a');
    mapLink.href = mapLinks[selectedLanguage][index];
    mapLink.target = "_blank";
    mapLink.style.display = "block";
    mapLink.style.fontSize = "13px";
    mapLink.style.color = "#e3b174";
    mapLink.style.textDecoration = "underline";
    mapLink.textContent = openText[selectedLanguage];
    div.appendChild(mapLink);

    chatBody.appendChild(div);
  });

  scrollToBottom();
}


// Timings Screen
function showTimingsScreen(){
  chatBody.innerHTML="";
  currentScreen="timings";
  const backBtn = document.createElement('div');
  backBtn.classList.add('back-button');
  backBtn.textContent="← Back";
  backBtn.onclick=showMainMenu;
  chatBody.appendChild(backBtn);

  const timings=timingsData[selectedLanguage];
  timings.forEach((t)=>{ 
    const div=document.createElement('div');
    div.classList.add('menu-item');
    div.textContent=t;
    chatBody.appendChild(div);
  });
}

// Policies Screen
function showPoliciesScreen(){
  chatBody.innerHTML="";
  currentScreen="policies";
  const backBtn = document.createElement('div');
  backBtn.classList.add('back-button');
  backBtn.textContent="← Back";
  backBtn.onclick=showMainMenu;
  chatBody.appendChild(backBtn);

  const policies=policiesData[selectedLanguage];
  policies.forEach((p)=>{ 
    const div=document.createElement('div');
    div.classList.add('menu-item');
    div.textContent=p;
    chatBody.appendChild(div);
  });
}

// Social Media 
function showSocialMediaScreen() {
  chatBody.innerHTML = "";
  currentScreen = "social";

  // Back Button
  const backBtn = document.createElement('div');
  backBtn.classList.add('back-button');
  backBtn.textContent = "← Back";
  backBtn.onclick = showMainMenu;
  chatBody.appendChild(backBtn);

  // Heading
  const heading = document.createElement('div');
  heading.classList.add('bot-message', 'message');
  heading.textContent = "🌐 Connect with us on Social Media:";
  chatBody.appendChild(heading);

  // Social links with icons
  const links = [
    { 
      name: "TikTok",
      url: "https://www.tiktok.com/@blushnblowofficial",
      icon: `<svg width="24" height="24" viewBox="0 0 24 24" fill="#e3b174" xmlns="http://www.w3.org/2000/svg"><path d="M12 2C12.4 2 12.8 2 13.2 2.1C14.8 2.2 16.3 2.9 17.4 4C18.3 4.9 19 6.1 19.3 7.5C19.7 9.1 19.9 10.9 20 12.5C20 12.9 19.9 13.2 19.7 13.5C19.3 14 18.7 14.3 18.1 14.3C17.4 14.3 16.8 13.9 16.5 13.3C16.2 12.8 16 12.1 16 11.4C16 9.8 15.9 8.3 15.7 6.7C15.6 6 15.1 5.4 14.5 5.1C13.7 4.7 12.8 4.5 12 4.5C10.1 4.5 8.3 5.3 7 6.6C5.6 8 4.9 9.9 5 11.9C5.1 13.8 6.1 15.6 7.7 16.8C8.8 17.6 10.1 18.1 11.4 18.2C12.2 18.3 12.9 18.6 13.5 19.1C14.1 19.7 14.4 20.5 14.3 21.3C14.2 22.1 13.7 22.8 13 23.2C11.4 24 9.6 24.4 7.8 24.3C6.1 24.3 4.5 23.8 3.2 22.9C1.8 21.9 0.8 20.5 0.3 18.9C0.1 18.3 0 17.7 0 17V7C0 6.4 0.1 5.8 0.3 5.2C0.8 3.6 1.8 2.2 3.2 1.2C4.5 0.3 6.1 -0.2 7.8 -0.3C9.6 -0.4 11.4 0 13 0.8C13.7 1.2 14.2 1.9 14.3 2.7C14.4 3.5 14.1 4.3 13.5 4.9C12.9 5.4 12.2 5.7 11.4 5.8C10.1 5.9 8.8 5.4 7.7 4.6C6.1 3.4 5.1 1.6 5 0C5 -0.3 5.1 -0.5 5.3 -0.7C5.5 -0.9 5.8 -1 6.1 -1C6.4 -1 6.7 -0.9 6.9 -0.7C7.7 0.1 8.6 0.6 9.7 0.9C10.7 1.3 11.9 1.5 13 1.5Z"/></svg>`
    },
    { 
      name: "Instagram",
      url: "https://www.instagram.com/blushandblow.official",
      icon: `<svg width="24" height="24" viewBox="0 0 24 24" fill="#e3b174" xmlns="http://www.w3.org/2000/svg"><path d="M7.75 2H16.25C19.1 2 21.25 4.15 21.25 7V16.25C21.25 19.1 19.1 21.25 16.25 21.25H7.75C4.9 21.25 2.75 19.1 2.75 16.25V7C2.75 4.15 4.9 2 7.75 2ZM12 7C9.52 7 7.5 9.02 7.5 11.5C7.5 13.98 9.52 16 12 16C14.48 16 16.5 13.98 16.5 11.5C16.5 9.02 14.48 7 12 7ZM18 5.75C17.31 5.75 16.75 6.31 16.75 7C16.75 7.69 17.31 8.25 18 8.25C18.69 8.25 19.25 7.69 19.25 7C19.25 6.31 18.69 5.75 18 5.75ZM12 8.5C13.66 8.5 15 9.84 15 11.5C15 13.16 13.66 14.5 12 14.5C10.34 14.5 9 13.16 9 11.5C9 9.84 10.34 8.5 12 8.5Z"/></svg>`
    },
    { 
      name: "Facebook",
      url: "https://www.facebook.com/BlushnBlow.official",
      icon: `<svg width="24" height="24" viewBox="0 0 24 24" fill="#e3b174" xmlns="http://www.w3.org/2000/svg"><path d="M22 12C22 6.47715 17.5228 2 12 2C6.47714 2 2 6.47715 2 12C2 17.0222 5.65786 21.1283 10.4375 21.8789V14.8906H7.89844V12H10.4375V9.79688C10.4375 7.29063 11.9305 5.90625 14.2178 5.90625C15.312 5.90625 16.4609 6.10156 16.4609 6.10156V8.5625H15.1977C13.9517 8.5625 13.5625 9.33398 13.5625 10.1289V12H16.3516L15.9062 14.8906H13.5625V21.8789C18.3421 21.1283 22 17.0222 22 12Z"/></svg>`
    },
    { 
      name: "YouTube",
      url: "https://www.youtube.com/@blushnblow",
      icon: `<svg width="24" height="24" viewBox="0 0 24 24" fill="#e3b174" xmlns="http://www.w3.org/2000/svg"><path d="M19.615 3.184C21.24 3.64 22.36 4.782 22.816 6.384C23.556 8.992 23.556 12.992 23.556 12.992C23.556 12.992 23.556 16.992 22.816 19.6C22.36 21.2 21.24 22.344 19.615 22.8C17.008 23.544 12.992 23.544 12.992 23.544C12.992 23.544 8.976 23.544 6.368 22.8C4.744 22.344 3.6 21.2 3.144 19.6C2.4 16.992 2.4 12.992 2.4 12.992C2.4 12.992 2.4 8.992 3.144 6.384C3.6 4.782 4.744 3.64 6.368 3.184C8.976 2.44 12.992 2.44 12.992 2.44C12.992 2.44 17.008 2.44 19.615 3.184ZM10 8.992V16.992L16 12.992L10 8.992Z"/></svg>`
    }
  ];

  links.forEach(link => {
    const div = document.createElement('div');
    div.classList.add('menu-item');
    div.innerHTML = `${link.icon} <a href="${link.url}" target="_blank" style="color:#e3b174; margin-left:8px; text-decoration:none; font-weight:600;">${link.name}</a>`;
    chatBody.appendChild(div);
  });
}


// ---------------- Language Select ----------------
function selectLanguage(lang){
  selectedLanguage=lang;
  showMainMenu();
}

// ---------------- Input Enter ----------------
function handleEnter(){
  const val = numberInput.value.trim();

  if(currentScreen === "language"){
    const num = parseInt(val);
    if(num >= 1 && num <= languages.length){
      selectLanguage(languages[num-1]);
    }
  } 
  else if(currentScreen === "mainMenu"){
    const num = parseInt(val);
    switch(num){
      case 1: handleMainMenu(1); break;
      case 2: handleMainMenu(2); break;
      case 3: handleMainMenu(3); break;
      case 4: handleMainMenu(4); break;
      case 5: handleMainMenu(5); break;
      case 6: handleMainMenu(6); break; // Assistant
      case 7: handleMainMenu(7); break; // Exit
      default: break;
    }
  } 
  else if(currentScreen === "services"){
    const services = Object.keys(servicesData[selectedLanguage]);
    const num = parseInt(val);
    if(num >= 1 && num <= services.length){
      showSubServiceScreen(services[num-1]);
    }
  } 
  else if(currentScreen === "subService"){
    const subServices = servicesData[selectedLanguage][appointmentData.service];
    const num = parseInt(val);
    if(num >= 1 && num <= subServices.length){
      showAppointmentScreen(subServices[num-1]);
    }
  } 
  else if(currentScreen === "locations"){
    const locs = locationsData[selectedLanguage];
    const num = parseInt(val);
    if(num >= 1 && num <= locs.length){
      alert("Selected location: "+locs[num-1]);
    }
  } 
  else if(currentScreen === "assistant"){ // NEW for Assistant
    if(val){
      addUserMessage(val);  // show user message
      sendToGPT(val);       // show simulated GPT reply
    }
  }

  numberInput.value = ""; // clear input
}

   

// Enter key
numberInput.addEventListener('keydown', function(e){
  if(e.key==="Enter") handleEnter();
});

// Initialize
showLanguageScreen();
</script>

<!-- Elegant Deal Popup -->
<div id="dealPopup" class="popup-overlay">
  <div class="popup-box">
    <h3>Would you like to avail this deal?</h3>
    <div class="popup-buttons">
      <button onclick="confirmDeal()" class="yes-btn">Yes</button>
      <button onclick="closePopup()" class="no-btn">No</button>
    </div>
  </div>
</div>

<style>
.popup-overlay {
  display: none;
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.6);
  justify-content: center;
  align-items: center;
  z-index: 9999;
}
.popup-box {
  background: #fff;
  padding: 25px;
  border-radius: 16px;
  text-align: center;
  width: 300px;
  box-shadow: 0 0 20px rgba(0,0,0,0.2);
  animation: popupIn 0.25s ease;
}
.popup-box h3 {
  margin-bottom: 20px;
  font-family: 'Poppins', sans-serif;
  color: #333;
}
.popup-buttons {
  display: flex;
  justify-content: space-around;
}
.yes-btn, .no-btn {
  border: none;
  padding: 10px 20px;
  border-radius: 10px;
  cursor: pointer;
  font-weight: bold;
  transition: 0.2s;
}
.yes-btn {
  background-color: #e91e63;
  color: #fff;
}
.no-btn {
  background-color: #ddd;
}
.yes-btn:hover {
  background-color: #c2185b;
}
.no-btn:hover {
  background-color: #bbb;
}
@keyframes popupIn {
  from {transform: scale(0.9); opacity: 0;}
  to {transform: scale(1); opacity: 1;}
}
</style>

<script>
function showDealPopup() {
  document.getElementById('dealPopup').style.display = 'flex';
}
function closePopup() {
  document.getElementById('dealPopup').style.display = 'none';
}
function confirmDeal() {
  window.location.href = 'appointment.html';
}
</script>


</body>
</html>
